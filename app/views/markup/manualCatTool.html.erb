<!DOCTYPE html>
<meta charset="utf-8">
<%= include_gon %>

<script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>

<style>
#username{
float:right;
padding-top: 2px;
padding-right: 4px;
}

.chart {
  background-color: #efefef;
}
.chart text {
  fill: black;
  font: 10px sans-serif;
  text-anchor: end;
}

.axis text {
  font: 11px sans-serif;
}

.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.grid-background {
  fill: #ddd;
}

.grid line,
.grid path {
  fill: none;
  stroke: #fff;
  shape-rendering: crispEdges;
}

.grid .minor.tick line {
  stroke-opacity: .5;
}

.brush .extent {
  stroke: #000;
  fill-opacity: .125;
  shape-rendering: crispEdges;
}

.axis text {
  font: 10px sans-serif;
}

.axis line,
.axis path {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

#PulseAreaDetail{
width:100px;
height:100px;

}

#instructions{
color: gray;
font-family: sans-serif;
}

</style>

<h3>
<div id="username">
Researcher: <%= params[:researcher] %>
</div>
</h3>

<h3>CyberDojo Id: <%= params[:id] %>
Avatar: <%= params[:avatar] %>
Kata Name: <%= params[:kataName] %>
</h3>


<body>
<div id="instructions">'a' - mark red cycle : 's' - mark as green cycle : 'd' - mark as blue cycle : 'f' mark as white cycle<br>
left and right arrow - move entire brush left and right <br>
shift + arrow - grow that side : alt (option) + arrow - shrink that side<br>
x - delete all cycles under brush<br>
</div>

<div id="viz"></div>
<svg class="chart"></svg>

<div id="accordion">
</div>

<script>

initializeKeyBindings();

var data = gon.compiles;
var phaseData = gon.phases;
// console.log(phaseData);
compiles = gon.compiles;
cycles = gon.cycles;
username = "<%= params[:researcher] %>";
// console.log(gon.cycles);

pageSetup();

// console.log(gon.normalizedPhaseTime);
// console.log(gon.normalizedPhaseSLOC);
// console.log(username);

// TDDData = gon.normalizedPhaseSLOC;
drawUncatagorizedKata();
// buildpulseChart(gon.normalizedPhaseSLOC);
addAllPrexistingMarkup(gon.allMarkups[username]);

</script>
